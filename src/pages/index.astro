---
import Layout from '#layouts/Layout.astro'
---

<Layout title="JosÃ© Luis Silva | Portfolio">
	<main>
		<article>
			<header>
				<div id="about" data-visible="true">
					<p>me</p>
					<hr class="vertical-line" />
					<div class="grouping-lines down"></div>
				</div>
				<div id="projects" data-visible="true">
					<p>website</p>
					<hr class="vertical-line" />
					<div class="grouping-lines down"></div>
				</div>
			</header>

			<h1>
				<span id="name" data-visible="true">joseluis</span>
				<span id="at" data-visible="true">@</span>
				<span id="nick" data-visible="true">sheokahn</span>
				<span id="tlg" data-visible="true">.com</span>
			</h1>

			<footer>
				<div id="email-right" class="grouping-lines up" data-visible="true">
				</div>
				<div id="email-left" class="grouping-lines up" data-visible="true">
				</div>
				<div id="social-media" data-visible="true">
					<div class="grouping-lines up"></div>
					<hr class="vertical-line" />
					<p>social media</p>
				</div>
				<div id="email" data-visible="true">
					<div class="grouping-lines up"></div>
					<hr class="vertical-line" />
					<p>email</p>
				</div>
			</footer>
		</article>
	</main>
</Layout>

<style>
	main {
		display: grid;
		min-height: 100dvh;
		place-content: center;
	}
	article {
		-webkit-touch-callout: none /* iOS Safari */;
		-webkit-user-select: none /* Safari */;
		-khtml-user-select: none /* Konqueror HTML */;
		-moz-user-select: none /* Firefox */;
		-ms-user-select: none /* Internet Explorer/Edge */;
		user-select: none
			/* Non-prefixed version; currently supported by Chrome and Opera */;

		display: grid;
		grid-template-rows: 102px 48px 150px;

		& > header {
			display: grid;
			grid-template-columns: 185px 50px 236px 116px;

			& > div#projects {
				grid-column: 3 / span 2;
			}
		}

		& > h1 {
			display: grid;
			grid-template-columns: 185px 50px 236px 116px;
		}

		& > footer {
			display: grid;
			margin-top: 5px;
			grid-template-rows: repeat(2, 1fr);
			grid-template-columns: 185px 50px 236px 116px;

			& > div#social-media {
				grid-column: 2 / span 2;
			}
			& > div#email {
				grid-row: 2;
				grid-column: span 4;
			}
		}
	}

	div#about,
	div#email,
	div#projects,
	div#social-media {
		text-align: center;
	}

	p {
		font-size: 24px;
		line-height: 32px;
	}

	p,
	h1 {
		letter-spacing: 0.05em;
	}

	h1 {
		font-size: 48px;
		line-height: 1;
	}

	hr.vertical-line {
		left: 50%;
		width: 3px;
		height: 10px;
		border-width: 0;
		position: relative;
		background-color: black;
	}

	.grouping-lines {
		height: 60px;
		border-width: 3px;
		border-style: solid;
		border-color: black;

		&.down {
			border-bottom-width: 0;
		}
		&.up {
			border-top-width: 0;
		}
	}

	#email-left,
	#email-right {
		height: 100%;
	}

	#email-right {
		grid-row: 1;
		grid-column: 1;
		border-top-width: 0;
		border-right-width: 0;
		border-bottom-width: 0;
	}
	#email-left {
		grid-row: 1;
		grid-column: 4;
		border-top-width: 0;
		border-left-width: 0;
		border-bottom-width: 0;
	}

	[data-visible='false'] {
		opacity: 0.1;
		transition: opacity 0.5s ease;
	}
	[data-visible='true'] {
		opacity: 1;
		transition: opacity 0.5s ease;
	}
</style>

<script>
	const elements: Record<string, HTMLElement | null> = {
		about: document.getElementById('about'),
		projects: document.getElementById('projects'),
		socialMedia: document.getElementById('social-media'),
		email: document.getElementById('email'),
		emailLeft: document.getElementById('email-left'),
		emailRight: document.getElementById('email-right'),
		name: document.getElementById('name'),
		at: document.getElementById('at'),
		nick: document.getElementById('nick'),
		tlg: document.getElementById('tlg'),
	}

	const updateVisibility = (
		visible: 'true' | 'false',
		elementsToUpdate: string[] = []
	): void => {
		elementsToUpdate.forEach((el) => {
			if (elements[el]) elements[el]!.dataset.visible = visible
		})
	}

	const addMouseEvents = (
		element: HTMLElement | null,
		hideElements: string[] = []
	): void => {
		element?.addEventListener('mousemove', () => {
			updateVisibility('false', hideElements)
		})

		element?.addEventListener('mouseout', () => {
			updateVisibility('true', Object.keys(elements))
		})
	}

	addMouseEvents(elements.about, [
		'projects',
		'socialMedia',
		'email',
		'emailRight',
		'emailLeft',
		'at',
		'nick',
		'tlg',
	])
	addMouseEvents(elements.name, [
		'projects',
		'socialMedia',
		'email',
		'emailRight',
		'emailLeft',
		'at',
		'nick',
		'tlg',
	])
	addMouseEvents(elements.projects, [
		'about',
		'socialMedia',
		'email',
		'emailRight',
		'emailLeft',
		'name',
		'at',
	])
	addMouseEvents(elements.tlg, [
		'about',
		'socialMedia',
		'email',
		'emailRight',
		'emailLeft',
		'name',
		'at',
	])
	addMouseEvents(elements.socialMedia, [
		'about',
		'projects',
		'email',
		'emailRight',
		'emailLeft',
		'name',
		'tlg',
	])
	addMouseEvents(elements.at, [
		'about',
		'projects',
		'email',
		'emailRight',
		'emailLeft',
		'name',
		'tlg',
	])
	addMouseEvents(elements.email, ['about', 'projects', 'socialMedia'])
	addMouseEvents(elements.nick, ['about', 'projects', 'socialMedia'])
</script>
